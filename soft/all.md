# 说明

这篇文章记录关于软件系统一些知识。

#正文

## 1.缓存穿透的原理和解决方案

**缓存穿透：**

缓存穿透是指查询一个一定不存在的数据，由于缓存是不命中时需要从数据库查询，查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到数据库去查询，造成缓存穿透。

解决办法：

**1.布隆过滤**

对所有可能查询的参数以hash形式存储，在控制层先进行校验，不符合则丢弃。还有最常见的则是采用[布隆过滤器](https://www.baidu.com/s?wd=%E5%B8%83%E9%9A%86%E8%BF%87%E6%BB%A4%E5%99%A8&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd)，将所有可能存在的数据哈希到一个足够大的bitmap中，一个一定不存在的数据会被这个bitmap拦截掉，从而避免了对底层存储系统的查询压力。

补充:

**Bloom filter**

适用范围：可以用来实现数据字典，进行数据的判重，或者集合求交集

基本原理及要点：对于原理来说很简单，位数组+k个独立hash函数。将hash函数对应的值的位数组置1，查找时如果发现所有hash函数对应位都是1说明存在，很明显这个过程并不保证查找的结果是100%正确的。同时也不支持删除一个已经插入的关键字，因为该关键字对应的位会牵动到其他的关键字。所以一个简单的改进就是<u>**counting Bloom filter**</u>，用一个counter数组代替位数组，就可以支持删除了。添加时增加计数器，删除时减少计数器。

**2. 缓存空对象. 将 null 变成一个值.**

也可以采用一个更为简单粗暴的方法，如果一个查询返回的数据为空（不管是数 据不存在，还是系统故障），我们仍然把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟。

 缓存空对象会有两个问题：

 第一，空值做了缓存，意味着缓存层中存了更多的键，需要更多的内存空间 ( 如果是攻击，问题更严重 )，比较有效的方法是针对这类数据设置一个较短的过期时间，让其自动剔除。**更占内存**

 第二，缓存层和存储层的数据会有一段时间窗口的不一致，可能会对业务有一定影响。例如过期时间设置为 5分钟，如果此时存储层添加了这个数据，那此段时间就会出现缓存层和存储层数据的不一致，此时可以利用消息系统或者其他方式清除掉缓存层中的空对象。**数据可能不一致**

## 什么是幂等，如何实现

在编程中.一个幂等操作的特点是其任意多次执行所产生的影响均与一次执行的影响相同。

## TPS、QPS、



